<?xml version="1.0" encoding="ISO-8859-1"?>  
<ReportSourceDefinition Id="RSD_REP-149_01" Cached="false" Expiration="0" IncrementalDimension="" Multilanguage="false" MaxRowsDimensionReference="" ><DimensionSourceDefinitions><DimensionSourceDefinition Name="COMISION" Description="2078" DataType="STRING" Calculated="false" Expression="" ExternalData="COMISION"/><DimensionSourceDefinition Name="VAL_NOMB_PERI" Description="1292" DataType="STRING" Calculated="false" Expression="" ExternalData="VAL_NOMB_PERI"/><DimensionSourceDefinition Name="COD_SUBG_VENT" Description="1779" DataType="STRING" Calculated="false" Expression="" ExternalData="COD_SUBG_VENT"/><DimensionSourceDefinition Name="COD_REGI" Description="2034" DataType="STRING" Calculated="false" Expression="" ExternalData="COD_REGI"/><DimensionSourceDefinition Name="COD_ZONA" Description="2035" DataType="STRING" Calculated="false" Expression="" ExternalData="COD_ZONA"/><DimensionSourceDefinition Name="DES_ZONA" Description="1442" DataType="STRING" Calculated="false" Expression="" ExternalData="DES_ZONA"/></DimensionSourceDefinitions><MetricSourceDefinitions><MetricSourceDefinition Name="VENTA" Description="2426" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="VENTA" ExternalCalculated="false"/><MetricSourceDefinition Name="BASE_COMISION" Description="2129" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="BASE_COMISION" ExternalCalculated="false"/><MetricSourceDefinition Name="IMPORTE_COMISION" Description="2078" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="IMPORTE_COMISION" ExternalCalculated="false"/><MetricSourceDefinition Name="PARTICIPACION" Description="2130" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="PARTICIPACION" ExternalCalculated="false"/></MetricSourceDefinitions><FilterDefinitions><FilterDefinition Name="IDIOMA" DataType="INTEGER" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="PAIS" DataType="INTEGER" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="MARCA" DataType="INTEGER" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="CANAL" DataType="INTEGER" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="PERIODO" DataType="INTEGER" FilterType="IN" Visual="false"/><FilterDefinition Name="TIPOCOMISION" DataType="STRING" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="COMISION" DataType="INTEGER" FilterType="EQUALTO" Visual="false"/><FilterDefinition Name="SUBGERENCIAVENTA" DataType="INTEGER" FilterType="IN" Visual="false"/><FilterDefinition Name="REGION" DataType="INTEGER" FilterType="IN" Visual="false"/><FilterDefinition Name="ZONA" DataType="INTEGER" FilterType="IN" Visual="false"/></FilterDefinitions><DataSourceDefinitions><DataSourceDefinition Name="REP-149" SourceType="SQL" Expression=" SELECT   gen_comis.val_i18n AS comision, peri.val_nomb_peri,          subg.cod_subg_vent,    reg.COD_REGI,    zon.COD_ZONA,       zon.DES_ZONA,              NVL ((SELECT SUM (ven_pre.val_vent_neta_esta)                   FROM int_fuent_venta_previ_sap ven_pre                    WHERE ven_pre.zorg_oid_regi = reg.oid_regi         AND ven_pre.ZZON_OID_ZONA = zon.OID_ZONA                             AND ven_pre.perd_oid_peri = com_cal.perd_oid_peri                        GROUP BY ven_pre.zorg_oid_regi, ven_pre.ZZON_OID_ZONA, ven_pre.perd_oid_peri),               0              ) AS venta,               NVL ((SELECT   SUM (ven_rea.imp_vent_neta_esta)                    FROM int_fuent_venta_real_vacum ven_rea                    WHERE ven_rea.perd_oid_peri = com_cal.perd_oid_peri                     AND ven_rea.zorg_oid_regi = reg.oid_regi      AND ven_rea.ZZON_OID_ZONA = zon.OID_ZONA                     GROUP BY ven_rea.zorg_oid_regi,ven_rea.ZZON_OID_ZONA, ven_rea.perd_oid_peri),                    0                ) AS base_comision,               SUM (com_cal.imp_comi) importe_comision,              TRUNC             (DECODE (NVL ((SELECT   SUM (ven_pre.val_vent_neta_esta)                                FROM int_fuent_venta_previ_sap ven_pre                               WHERE ven_pre.zorg_oid_regi = reg.oid_regi            AND ven_pre.ZZON_OID_ZONA = zon.OID_ZONA                                   AND ven_pre.perd_oid_peri =  com_cal.perd_oid_peri                            GROUP BY ven_pre.zorg_oid_regi, ven_pre.ZZON_OID_ZONA, ven_pre.perd_oid_peri          ), 0         ),                        0, 0,                               NVL ((SELECT   SUM (ven_rea.imp_vent_neta_esta)                                  FROM int_fuent_venta_real_vacum ven_rea                                 WHERE ven_rea.perd_oid_peri = com_cal.perd_oid_peri                                   AND ven_rea.zorg_oid_regi = reg.oid_regi           AND ven_rea.ZZON_OID_ZONA = zon.OID_ZONA                               GROUP BY ven_rea.zorg_oid_regi,ven_rea.ZZON_OID_ZONA,                                        ven_rea.perd_oid_peri),                             0                            )                      / NVL ((SELECT   SUM (ven_pre.val_vent_neta_esta)                                  FROM int_fuent_venta_previ_sap ven_pre                                 WHERE ven_pre.zorg_oid_regi = reg.oid_regi            AND ven_pre.ZZON_OID_ZONA = zon.OID_ZONA                                      AND ven_pre.perd_oid_peri = com_cal.perd_oid_peri                              GROUP BY ven_pre.zorg_oid_regi,ven_pre.ZZON_OID_ZONA, ven_pre.perd_oid_peri),                             0                            )                     ),              3             ) AS participacion         FROM zon_sub_geren_venta subg,          zon_regio reg,    zon_zona zon,          com_comis_calcu com_cal,          com_comis com,          cra_perio peri,            (SELECT gen.val_oid, gen.val_i18n             FROM v_gen_i18n_sicc gen            WHERE gen.attr_enti = 'COM_COMIS' AND gen.idio_oid_idio = %value_IDIOMAVALUE%) gen_comis    WHERE subg.oid_subg_vent = reg.zsgv_oid_subg_vent      AND reg.OID_REGI = zon.ZORG_OID_REGI         AND peri.oid_peri = com_cal.perd_oid_peri             AND (INSTR(      (       CASE WHEN (ZON.PERD_OID_PERI_FINA IS NOT NULL) THEN          (         SELECT PQ_APL_REP.FN_013_FACDTR_CONCAT_PERI(ZON.PERD_OID_PERI_INIC, ZON.PERD_OID_PERI_FINA)       FROM DUAL      )        ELSE          (         SELECT PQ_APL_REP.FN_013_FACDTR_CONCAT_PERI(ZON.PERD_OID_PERI_INIC,(                   SELECT *                   FROM                    (                      SELECT P.OID_PERI                         FROM CRA_PERIO P                            WHERE P.MARC_OID_MARC =  %value_MARCAVALUE%                             AND P.CANA_OID_CANA = %value_CANALVALUE%                         AND  P.PAIS_OID_PAIS =  %value_PAISVALUE%                        AND SYSDATE &lt;= P.FEC_FINA                             AND SYSDATE >= P.FEC_INIC                    ORDER BY FEC_FINA DESC                      )                   WHERE ROWNUM = 1                   ))       FROM DUAL      )      END   ),               ','||COM_CAL.PERD_OID_PERI||','        ) > 0)        AND com_cal.clie_oid_clie = zon.CLIE_OID_CLIE       AND com_cal.comi_oid_comi = com.oid_comi      AND com.oid_comi = gen_comis.val_oid(+)        AND com_cal.perd_oid_peri IN (%value_PERIODOVALUES%)      AND subg.marc_oid_marc = %value_MARCAVALUE%       AND subg.cana_oid_cana = %value_CANALVALUE%       AND subg.pais_oid_pais = %value_PAISVALUE%    %start_SUBGERENCIAVENTAVALUES% AND subg.OID_SUBG_VENT IN (%value_SUBGERENCIAVENTAVALUES%) %end_SUBGERENCIAVENTAVALUES%      %start_REGIONVALUES% AND reg.oid_regi IN (%value_REGIONVALUES%) %end_REGIONVALUES%   %start_ZONAVALUES% AND zon.OID_ZONA IN (%value_ZONAVALUES%) %end_ZONAVALUES%          AND com.oid_comi = %value_COMISIONVALUE%         AND com.ind_vent_cobr = %value_TIPOCOMISIONVALUE%    GROUP BY gen_comis.val_i18n,          com_cal.perd_oid_peri,          peri.val_nomb_peri,          subg.cod_subg_vent,          reg.cod_regi,          reg.oid_regi,    zon.OID_ZONA,    zon.COD_ZONA,    zon.DES_ZONA    " ExternalClassName="oracle.jdbc.driver.OracleDriver" ExternalSourceData="" ExternalConnectionString="" ExternalConnectionClassName="oracle.jdbc.driver.OracleDriver" ExternalConnectionLocalUrl="jdbc:oracle:thin:@192.168.118.106:1523:SICCV3D" ExternalConnectionDistributedUrl="" ExternalConnectionUser="usu_peru" ExternalConnectionPassword="peru" DatePattern="" DateTimePattern=""/></DataSourceDefinitions><ParameterValues><ParameterValue FilterDefinitionName="IDIOMA" FilterParameter="VALUE" DefaultValue="1"/><ParameterValue FilterDefinitionName="PAIS" FilterParameter="VALUE" DefaultValue="1"/><ParameterValue FilterDefinitionName="MARCA" FilterParameter="VALUE" DefaultValue="1"/><ParameterValue FilterDefinitionName="CANAL" FilterParameter="VALUE" DefaultValue="1"/><ParameterValue FilterDefinitionName="PERIODO" FilterParameter="VALUES" DefaultValue="43"/><ParameterValue FilterDefinitionName="TIPOCOMISION" FilterParameter="VALUE" DefaultValue="C"/><ParameterValue FilterDefinitionName="COMISION" FilterParameter="VALUE" DefaultValue="1"/><ParameterValue FilterDefinitionName="SUBGERENCIAVENTA" FilterParameter="VALUES" DefaultValue="NULL_VALUE"/><ParameterValue FilterDefinitionName="REGION" FilterParameter="VALUES" DefaultValue="NULL_VALUE"/><ParameterValue FilterDefinitionName="ZONA" FilterParameter="VALUES" DefaultValue="NULL_VALUE"/></ParameterValues></ReportSourceDefinition>  

