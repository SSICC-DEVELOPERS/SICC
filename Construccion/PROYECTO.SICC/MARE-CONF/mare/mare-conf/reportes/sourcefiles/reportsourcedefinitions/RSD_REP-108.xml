<?xml version="1.0" encoding="UTF-8"?>  
<!-- edited with XMLSPY v2004 rel. 2 U (http://www.xmlspy.com) by team (renegade) -->  
<ReportSourceDefinition Id="RSD_REP-108" Cached="false" Expiration="0" IncrementalDimension="" Multilanguage="false" MaxRowsDimensionReference="" >  
	<DimensionSourceDefinitions>  
		<DimensionSourceDefinition Name="PAIS" Description="1019" DataType="STRING" Calculated="false" Expression="" ExternalData="PAIS"/>  
		<DimensionSourceDefinition Name="SOCIEDAD" Description="1618" DataType="STRING" Calculated="false" Expression="" ExternalData="SOCIEDAD"/>  
		<DimensionSourceDefinition Name="OID_REGI" Description="2072" DataType="STRING" Calculated="false" Expression="" ExternalData="OID_REGI"/>  
		<DimensionSourceDefinition Name="DES_REGI" Description="2073" DataType="STRING" Calculated="false" Expression="" ExternalData="DES_REGI"/>  
		<DimensionSourceDefinition Name="OPERACION" Description="1951" DataType="STRING" Calculated="false" Expression="" ExternalData="OPERACION"/>  
		<DimensionSourceDefinition Name="VAL_NOMB_PERI" Description="1078" DataType="STRING" Calculated="false" Expression="" ExternalData="VAL_NOMB_PERI"/>  
		<DimensionSourceDefinition Name="TIPO_SOL" Description="1251		" DataType="STRING" Calculated="false" Expression="" ExternalData="TIPO_SOL"/>  
	</DimensionSourceDefinitions>  
	<MetricSourceDefinitions>  
		<MetricSourceDefinition Name="FACTURADO" Description="1444" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="FACTURADO" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TOTAL_OPERACIONES" Description="TOTAL_OPERACIONES" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TOTAL_OPERACIONES" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="PORCENTAJE" Description="1940" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="PORCENTAJE" ExternalCalculated="false"/>  
	</MetricSourceDefinitions>  
	<FilterDefinitions>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="IDIOMA" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="PAIS" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="CANAL" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="MARCA" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="PERIODOINICIAL" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="PERIODOFINAL" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="IN" Name="OPERACION" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="IN" Name="REGION" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="IN" Name="ZONA" Visual="FALSE"/>  
		<FilterDefinition DataType="STRING" FilterType="EQUALTO" Name="ZONEUSER" Visual="FALSE"/>  
	</FilterDefinitions>  
	<DataSourceDefinitions>  
		<DataSourceDefinition Name="REP-108" SourceType="SQL" Expression="  
		select gen_pais.pais,  
	   (  
		   select pro.stringvalue  
		   from principals pri,  
		   		propertyvalues pro			  
		   where pri.name = %value_ZONEUSERVALUE%	    
		   		 and pro.idproperty = 48  
				 and pro.idprincipal = pri.idprincipal  
	   ) sociedad,  
	   reg.oid_regi,  
	   reg.DES_REGI,  
	   gen_op.operacion,  
	   per.val_nomb_peri,  
	   gen_t_sol.tipo_sol,  
	   nvl(sum(fac_lin.NUM_UNID_ATEN),0)facturado,  
	   nvl(sum(rec_lin.NUM_UNID_RECL),0)total_operaciones,  
	   decode( nvl(sum(fac_lin.NUM_UNID_ATEN),0),0,0,  
	   		nvl(sum(rec_lin.NUM_UNID_RECL),0) / sum(fac_lin.NUM_UNID_ATEN) )*100 as porcentaje     
from  
	fac_docum_conta_cabec fac,  
	fac_docum_conta_linea fac_lin,  
	rec_cabec_recla rec_cab,  
	rec_opera_recla op_rec,  
	rec_linea_opera_recla rec_lin,  
	rec_opera op,  
	rec_tipos_opera t_op,  
	rec_preci prec,  
	rec_tipo_movim t_mov,  
	zon_regio reg,  
	zon_zona zon,  
	cra_perio per,  
	ped_tipo_solic_pais t_sol_p,  
	ped_tipo_solic t_sol,  
	(  
	 select val_oid, val_i18n operacion  
	 from v_gen_i18n_sicc  
	 where attr_enti = 'REC_OPERA'  
	 	   and idio_oid_idio =  %value_IDIOMAVALUE%	  
  
	)gen_op,  
	(  
	 select val_oid, val_i18n pais  
	 from v_gen_i18n_sicc  
	 where attr_enti = 'SEG_PAIS'  
	 	   and idio_oid_idio = %value_IDIOMAVALUE%	  
  
	)gen_pais,  
	(  
	 select val_oid, val_i18n tipo_sol  
	 from v_gen_i18n_sicc  
	 where attr_enti = 'PED_TIPO_SOLIC'  
	 	   and idio_oid_idio =  %value_IDIOMAVALUE%	  
  
	)gen_t_sol,  
	(  
	 select fec_inic  
	 from cra_perio  
	 where oid_peri = %value_PERIODOINICIALVALUE%  
	)per_ini,  
	(  
	 select fec_fina  
	 from cra_perio  
	 where oid_peri = decode(%value_PERIODOFINALVALUE%,-1,%value_PERIODOINICIALVALUE%,%value_PERIODOFINALVALUE%)   
  
	)per_fin	  
where  
	 fac.OID_CABE = fac_lin.DCCA_OID_CABE(+)  
     
     and rec_cab.SOCA_OID_SOLI_CABE(+) = fac.SOCA_OID_SOLI_CABE  
	 and rec_cab.OID_CABE_RECL = op_rec.CARE_OID_CABE_RECL  
	 and op_rec.TIOP_OID_TIPO_OPER = t_op.OID_TIPO_OPER  
	 and op_rec.OID_OPER_RECL = rec_lin.OPRE_OID_OPER_RECL  
	 and t_op.ROPE_OID_OPER = op.OID_OPER  
	 and op.PECI_OID_PECI = prec.OID_PREC  
	 and prec.COD_PREC = 'I'  
	 and rec_lin.TIMO_OID_TIPO_MOVI = t_mov.OID_TIPO_MOVI  
	 and t_mov.COD_TIPO_MOVI = 'E'  
	 and op.OID_OPER = gen_op.val_oid(+)  
	 and rec_cab.pais_oid_pais = gen_pais.val_oid(+)  
	  
	 and fac.ZORG_OID_REGI = reg.oid_regi  
	 and fac.zzon_oid_zona = zon.oid_zona  
  
	 and op_rec.PERD_OID_PERI_RECL = per.oid_peri  
 	 and per_ini.fec_inic &lt;= per.fec_inic  
	 and per.fec_fina &lt;= per_fin.fec_fina  
  
	 and rec_lin.TSPA_OID_TIPO_SOLI_PAIS = t_sol_p.OID_TIPO_SOLI_PAIS(+)  
	 and t_sol_p.TSOL_OID_TIPO_SOLI = t_sol.oid_tipo_soli(+)  
	 and t_sol.oid_tipo_soli = gen_t_sol.val_oid(+)  
  %start_REGIONVALUES%   and reg.oid_regi in  (%value_REGIONVALUES%)  %end_REGIONVALUES%   
  %start_ZONAVALUES%   and zon.oid_zona in  (%value_ZONAVALUES%)  %end_ZONAVALUES%   
  
  
	 and op.OID_OPER in (%value_OPERACIONVALUES%)   
	 and rec_cab.pais_oid_pais = %value_PAISVALUE%	  
	 and per.marc_oid_marc =  (%value_MARCAVALUE%)   
     and per.cana_oid_cana = (%value_CANALVALUE%)    
  
 %and_prefilter% group by  
	  reg.oid_regi,  
	  reg.DES_REGI,  
	  gen_pais.pais,  
	  gen_op.operacion,  
	  gen_t_sol.tipo_sol,  
	  per.val_nomb_peri  
		  
		" ExternalClassName="oracle.jdbc.driver.OracleDriver" ExternalSourceData="" ExternalConnectionString="" ExternalConnectionClassName="oracle.jdbc.driver.OracleDriver" ExternalConnectionLocalUrl="jdbc:oracle:thin:@192.168.118.106:1523:SICCV3D" ExternalConnectionDistributedUrl="" ExternalConnectionUser="usu_peru" ExternalConnectionPassword="peru" DatePattern="" DateTimePattern=""/>  
	</DataSourceDefinitions>  
	<ParameterValues>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="IDIOMA" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="PAIS" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="CANAL" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="MARCA" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1379" FilterDefinitionName="PERIODOINICIAL" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="PERIODOFINAL" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="OPERACION" FilterParameter="VALUES"/>  
		<ParameterValue DefaultValue="NULL_VALUE" FilterDefinitionName="REGION" FilterParameter="VALUES"/>  
		<ParameterValue DefaultValue="NULL_VALUE" FilterDefinitionName="ZONA" FilterParameter="VALUES"/>  
		<ParameterValue DefaultValue="USUARIO1" FilterDefinitionName="ZONEUSER" FilterParameter="VALUE"/>  
	</ParameterValues>  
	<Localizations/>  
</ReportSourceDefinition>  

