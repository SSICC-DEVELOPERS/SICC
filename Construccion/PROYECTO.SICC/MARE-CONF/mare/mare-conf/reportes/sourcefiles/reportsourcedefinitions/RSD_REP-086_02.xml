<?xml version="1.0" encoding="UTF-8"?>  
<!-- edited with XMLSPY v2004 rel. 2 U (http://www.xmlspy.com) by a (a) -->  
<ReportSourceDefinition Id="RSD_REP-086_02" Cached="false" Expiration="0" IncrementalDimension="" Multilanguage="false" MaxRowsDimensionReference="" >  
	<DimensionSourceDefinitions>  
		<DimensionSourceDefinition Name="PAIS" Description="PAIS" DataType="STRING" Calculated="false" Expression="" ExternalData="PAIS"/>  
		<DimensionSourceDefinition Name="DESC_AREA" Description="DESC_AREA" DataType="STRING" Calculated="false" Expression="" ExternalData="DESC_AREA"/>  
	</DimensionSourceDefinitions>  
	<MetricSourceDefinitions>  
		<MetricSourceDefinition Name="TIPO_CLI_1" Description="TIPO_CLI_1" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_1" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TIPO_CLI_2" Description="TIPO_CLI_2" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_2" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TIPO_CLI_3" Description="TIPO_CLI_3" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_3" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TIPO_CLI_4" Description="TIPO_CLI_4" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_4" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TIPO_CLI_5" Description="TIPO_CLI_5" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_5" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TIPO_CLI_6" Description="TIPO_CLI_6" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TIPO_CLI_6" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="PENDIENTES" Description="PENDIENTES" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="PENDIENTES" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="ATENDIDAS" Description="ATENDIDAS" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="ATENDIDAS" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="MENOS_24" Description="MENOS_24" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="MENOS_24" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="MAS_24_MENOS_48" Description="MAS_24_MENOS_48" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="MAS_24_MENOS_48" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="MAS_48" Description="MAS_48" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="MAS_48" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="PROMEDIO" Description="PROMEDIO" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="PROMEDIO" ExternalCalculated="false"/>  
		<MetricSourceDefinition Name="TOTAL" Description="TOTAL" AggregateType="SUM" GroupFooterType="NONE" Calculated="false" AggregateFunction="" GroupFooterFunction="" ExternalData="TOTAL" ExternalCalculated="false"/>  
	</MetricSourceDefinitions>  
	<FilterDefinitions>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="IDIOMA" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="PAIS" Visual="FALSE"/>  
		<FilterDefinition DataType="STRING" FilterType="EQUALTO" Name="AGENTE" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="AREASEGUIMIENTO" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE1" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE2" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE3" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE4" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE5" Visual="FALSE"/>  
		<FilterDefinition DataType="INTEGER" FilterType="EQUALTO" Name="TIPOCLIENTE6" Visual="FALSE"/>  
		<FilterDefinition DataType="STRING" FilterType="EQUALTO" Name="FORMATOFECHA" Visual="FALSE"/>  
		<FilterDefinition DataType="DATE" FilterType="EQUALTO" Name="FECHAINICIO" Visual="FALSE"/>  
		<FilterDefinition DataType="DATE" FilterType="EQUALTO" Name="FECHAFIN" Visual="FALSE"/>  
	</FilterDefinitions>  
	<ParameterValues>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="IDIOMA" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="PAIS" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="NULL_VALUE" FilterDefinitionName="AGENTE" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="NULL_VALUE" FilterDefinitionName="AREASEGUIMIENTO" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="1" FilterDefinitionName="TIPOCLIENTE1" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="TIPOCLIENTE2" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="TIPOCLIENTE3" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="TIPOCLIENTE4" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="TIPOCLIENTE5" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="-1" FilterDefinitionName="TIPOCLIENTE6" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="dd/MM/yyyy" FilterDefinitionName="FORMATOFECHA" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="01/01/2000" FilterDefinitionName="FECHAINICIO" FilterParameter="VALUE"/>  
		<ParameterValue DefaultValue="01/01/2099" FilterDefinitionName="FECHAFIN" FilterParameter="VALUE"/>  
	</ParameterValues>  
	<DataSourceDefinitions>  
		<DataSourceDefinition Name="REP-086_02" SourceType="SQL" Expression="select pais,  
	   DECODE(desc_area,NULL,'Z - SIN AREA DE SEGUIMIENTO',desc_area) desc_area,  sum(tipo_cli_1)tipo_cli_1, sum(tipo_cli_2)tipo_cli_2, sum(tipo_cli_3)tipo_cli_3,   
	   sum(tipo_cli_4)tipo_cli_4, sum(tipo_cli_5)tipo_cli_5, sum(tipo_cli_6)tipo_cli_6, sum(pendiente)pendientes,  
	   sum(atendida) atendidas, sum(menos_24) menos_24, sum(mas_24_menos_48) mas_24_menos_48, sum(mas_48) mas_48,   
	   round((sum(fin_inicio) / (sum(atendida)+sum(pendiente))), 2)promedio,  
	   sum(atendida)+sum(pendiente) total  
from (   
	select gen_pai.pais,  
		   oid_cont, cal_cab_buz.oid_cabe_buzo, cal_det_buz.OID_DETA_BUZO,   
		   cal_cab_buz.val_desc_cabe_buzo desc_area,  
		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE1VALUE%) then		   
		   		1  
		   else   
		   		0  
		   end tipo_cli_1,  
		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE2VALUE%) then		   
		   		1  
		   else   
		   		0  
		   end tipo_cli_2,  
   		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE3VALUE%) then		   
		   		1  
		   else  
		        0  
		   end tipo_cli_3,  
		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE4VALUE%) then		   
		   		1  
		   else   
		   		0  
		   end tipo_cli_4,  
		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE5VALUE%) then  
		   		1  
		   else  
		   	    0  
		   end tipo_cli_5,  
		   case when (con.ticl_oid_tipo_clie = %value_TIPOCLIENTE6VALUE%) then	  
		   		1  
		   else  
		        0  
		   end tipo_cli_6,  
		   decode(est.cod_esta,'03',1,0) atendida,  
		   decode(est.cod_esta,'03',0,1)pendiente,  
		   case when (est.cod_esta = '03') then  
		   		case when (nvl(trunc((((86400*(decode(con.fec_hora_cier, null, sysdate, con.fec_hora_cier)-con.val_hora_inic))/60)/60)/24),0) &lt; 1) then  
					 1  
				else  
					 0  
			    end   
		   else  
		   	   0		   	     
		   end menos_24,	  
		   case when (est.cod_esta = '03') then  
		   		case when ((nvl(trunc((((86400*(decode(con.fec_hora_cier, null, sysdate, con.fec_hora_cier)-con.val_hora_inic))/60)/60)/24),0) >= 1) and (nvl(trunc((((86400*(decode(con.fec_hora_cier, null, sysdate, con.fec_hora_cier)-con.val_hora_inic))/60)/60)/24),0) &lt; 2)) then  
					 1  
				else  
					 0  
			    end   
		   else  
		   	   0		   	     
		   end mas_24_menos_48,	  
		   case when (est.cod_esta = '03') then  
		   		case when (nvl(trunc((((86400*(decode(con.fec_hora_cier, null, sysdate, con.fec_hora_cier)-con.val_hora_inic))/60)/60)/24),0) >= 2) then  
					 1  
				else  
					 0  
			    end   
		   else  
		   	   0		   	     
		   end mas_48,  
		   con.val_hora_fin-con.val_hora_inic fin_inicio  
		from cal_conta con,  
		 cal_motiv_conta mot,  
		 cal_atrib_estad_conta atr,  
		 cal_tipo_estad_conta est,  
		 cal_cabec_buzon cal_cab_buz,  
		 cal_detal_buzon cal_det_buz,  
		  (  
		 select gen.val_oid, gen.val_i18n pais  
		 from v_gen_i18n_sicc gen  
		 where gen.ATTR_ENTI = 'SEG_PAIS'  
		 	   and gen.idio_oid_idio = %value_IDIOMAVALUE%  
		 )gen_pai  
	where con.MOCO_OID_MOTI_CONT = mot.OID_MOTI_CONT  
		and mot.COD_MOTI = '00'  
		  %start_AGENTEVALUE% and con.COD_OPER = %value_AGENTEVALUE% %end_AGENTEVALUE%  
		  and con.ATEC_OID_ATRI_ESTA_CONT = atr.oid_atri_esta_cont  
		  and atr.teco_oid_tipo_esta_cont = est.oid_tipo_esta_cont  
		  and con.PAIS_OID_PAIS = %value_PAISVALUE%  
		  and to_date(con.VAL_HORA_INIC) >= to_date(%value_FECHAINICIOVALUE%, %value_FORMATOFECHAVALUE% )  
		  and to_date(con.VAL_HORA_FIN) &lt;= to_date(%value_FECHAFINVALUE%, %value_FORMATOFECHAVALUE% )  
		  and cal_det_buz.CABU_OID_CABE_BUZO = cal_cab_buz.oid_cabe_buzo(+)  
	      %start_AREASEGUIMIENTOVALUE% and cal_cab_buz.cod_buzo = %value_AREASEGUIMIENTOVALUE% %end_AREASEGUIMIENTOVALUE%  
		  and cal_det_buz.CONT_OID_CONT(+) = con.OID_CONT  
		  and con.pais_oid_pais = gen_pai.val_oid(+)  
 	    AND CON.TICL_OID_TIPO_CLIE IN (%value_TIPOCLIENTE1VALUE%,%value_TIPOCLIENTE2VALUE%,%value_TIPOCLIENTE3VALUE%,%value_TIPOCLIENTE4VALUE%,%value_TIPOCLIENTE5VALUE%,%value_TIPOCLIENTE6VALUE%)  
)  
group by pais,  
	  desc_area  
order by desc_area" ExternalClassName="oracle.jdbc.driver.OracleDriver" ExternalSourceData="" ExternalConnectionString="" ExternalConnectionClassName="oracle.jdbc.driver.OracleDriver" ExternalConnectionLocalUrl="jdbc:oracle:thin:@192.168.118.106:1523:SICCV3DG" ExternalConnectionDistributedUrl="" ExternalConnectionUser="usu_peru" ExternalConnectionPassword="usu_peru" DatePattern="dd/MM/yyyy" DateTimePattern="dd/MM/yyyy"/>  
	</DataSourceDefinitions>  
</ReportSourceDefinition>  

